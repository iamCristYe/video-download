name: channel3

on:
  # schedule:
  #   - cron: '20,50 * * * *'
  # push:
  #   branches:
  #     - master
  workflow_dispatch:

jobs:
  channel3:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.8' # Specify the Python version you need
    - name: Download FFmpeg
      run: |
        sudo apt update
        sudo apt install ffmpeg 
        ffmpeg -version

    - name: Download N_m3u8DL-RE and Stream
      run: |
        wget -O N_m3u8DL-RE.tar.gz https://github.com/nilaoda/N_m3u8DL-RE/releases/download/v0.3.0-beta/N_m3u8DL-RE_v0.3.0-beta_linux-x64_20241203.tar.gz
        tar -xzf N_m3u8DL-RE.tar.gz
        ./N_m3u8DL-RE --live-real-time-merge "https://video-edge-87ca13.sjc05.hls.live-video.net/v1/segment/Cp5u7D-n8R15_ghfMhSUMyyxyOkuT5Murptb6fcLVR61-T2XPd0gP--OLAKPEqZkBltP5ZpImeSw2VxFIChlydX8FbLhC1qVHEtHONFqYUuf27vn2f4Q9lfBRmBOeJUcvHDOsu9ficPUkAP-_PgwxLgux1th12j_8cpQrhvy2AHWwer_BVD7v96w0NcdLndlsKmF_8VraXQcSpj3O_O2Tcnu_aeNai_jflKCnAb7ko0diHxnogQ-81R_poNWM8UOvtIG-x9eJpK9ioag4QQWNBN5Yc-q4c2OiAnmoMvSAZa8JP8ZpOv9FahPeNS44-W-_FlBHE1Pd1JdOBYmY9PQrRABSpM3esNVWWAX4rfci6hw20HTJqTfVmqt3PSBJK56Q4pcb7HmdKZJh-am6BsicZt1zdd9-q95OuzzBfEEC-5TRY_g9Ayxt3fHgrH9vNL0ElQUKxe3X_kZTn8XxAjzL-UXYLmKRmK7d1ccKOoYqn2wEBrPowmdJZkXR2oFV3y1CUiCRXJ194SIvD3U7ySEdl6JEysJD6lq53HAU_xSXYafgHhH-VJ9dW-bH4pTQT6vWwAUthhSpCo4x5S5JhiXJHIvCRdOad2gg74FRk4asv27ne74OeBwYQ6sO5wp6l17mVL1smalH99QXg-J7uSjyPAj4llI8-AUM_ofFbLuf-4lsmktE4mzUC93AcrhZVXiovfcGLxuB-9e2OU_ZDPWnLCYBsC5DNFmQScdD3VOzXAKvrw2CWehNB8fKpIyL.ts" --save-name chunklist &
        # --live-keep-segments 
    
    - name: Run Python script
      run: |
        pip install requests
        pip install pywidevine
        python send_Telegram.py
      env:
        channel_id: "-1002290539654"
        bot_token: ${{ secrets.bot_token }}
