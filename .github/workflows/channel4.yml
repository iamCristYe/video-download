name: channel4

on:
  # schedule:
  #   - cron: '20,50 * * * *'
  # push:
  #   branches:
  #     - master
  workflow_dispatch:

jobs:
  channel4:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.8' # Specify the Python version you need
    - name: Download FFmpeg
      run: |
        sudo apt update
        sudo apt install ffmpeg 
        ffmpeg -version

    - name: Download N_m3u8DL-RE and Stream
      run: |
        wget -O N_m3u8DL-RE.tar.gz https://github.com/nilaoda/N_m3u8DL-RE/releases/download/v0.3.0-beta/N_m3u8DL-RE_v0.3.0-beta_linux-x64_20241203.tar.gz
        tar -xzf N_m3u8DL-RE.tar.gz
        ./N_m3u8DL-RE --live-real-time-merge "https://aps12.playlist.live-video.net/v1/playlist/CoUGuOhEGp-NiyiApSc9Nqs1XMsQWSuPw3fWYfgMWzm0f4Zr-fKAaJkCzRaZ55hm78wwzmv3HKMWGTX5CpKXk5shtQF7h5UAV3WcOXSCT1MoUw86Z0fplQes3jr5vjg4ba6szwxk4FyhI9eY76EGHvue8nBaFkTjqBSjGFxBz-474H1gjQXEZtaMam964lNXC4pKFxUUnFyTZa1qjcaQ9h6LMaHF5sMtDU85t9iWaks-XDFfcM4YYdn3QfSHdhLOaXGbzerhEG8gA_v9hx8KXDbFFfxbAzJ8nFlpT6KA9wDRh5vzAueTuD2X0O-ygy31nze5tJtTI_opHlBEOUbvreMK6Kv1mCW5lUKHcvy-finY3rTH5A8ts5poaWmAhZyNM4oGhE5iuzlywSXJt0BjNNgyOAzoiIN2sBOlidTvhGNDqAmN4FUGZHsIBgCBjkL_RswlJqeXQRFh8ten1X9S1KR1LBFAdmUPzLc7KafOsNblI0Lkb8DEgjqkajjQn7B6MeFX74ne3r1BFfPNhcyqOGxiqfxC_16nOYvjzze4v2a9GJ3bVxR4HBD6lU9VkO3bi2ZrQge5Jec7qOOOkX0b2QCs8dDoV2NvkzIVGSoNdnhbkrlS682N3ey0cVkUR6Kbipgclu-THHw1JrtGBhsjo-QDZ42wBoNefXWVPJH_LVMFWhNAetE6woimYpn_WvPwNTafmiMz-Vo4WMvUcF1TYLmDjeuX_RdljYMsjt63ANyn-aFU2qFuVP8FStFoEZaOO_lNE1WxCfCJq2E-zG93H-CTf3M6g-bX7CyefGHFx9YmrNY6UqWj7SsZsdV77xr1bD3saM2gvYdjFarsHChe-0cNyT3UaNG3fMljLthiW4Vf2eHCHKeaOX4Kn9zaLlHLjXCVzVoaCKQzIoYiOEHgNeSSHXHrB0RAiYywKOQ0AJzbmUlJVXicwMNNnR4woR_yHLSKFMs9fLMB4YBarzAHHKEVOBFkqIPfre4tWT6ma8y1Vqj8MwK9cjSqRSdJ6YC902rS5P2eLQQaDFDbZ9RNlVurA50D-CABKgl1cy13ZXN0LTIwpgw.m3u8" --save-name chunklist &
        # --live-keep-segments 
    
    - name: Run Python script
      run: |
        pip install requests
        pip install pywidevine
        ls
        python send_Telegram.py
      env:
        channel_id: "-1002477355148"
        bot_token: ${{ secrets.bot_token }}
