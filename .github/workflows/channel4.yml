name: channel4

on:
  # schedule:
  #   - cron: '20,50 * * * *'
  # push:
  #   branches:
  #     - master
  workflow_dispatch:

jobs:
  channel4:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.8' # Specify the Python version you need
    - name: Download FFmpeg
      run: |
        sudo apt update
        sudo apt install ffmpeg 
        ffmpeg -version

    - name: Download N_m3u8DL-RE and Stream
      run: |
        wget -O N_m3u8DL-RE.tar.gz https://github.com/nilaoda/N_m3u8DL-RE/releases/download/v0.3.0-beta/N_m3u8DL-RE_v0.3.0-beta_linux-x64_20241203.tar.gz
        tar -xzf N_m3u8DL-RE.tar.gz
        ./N_m3u8DL-RE --live-real-time-merge "https://apn11.playlist.live-video.net/v1/playlist/CocGHPLQWisZNy0TZvGjNYpl_7kIYOGguxBHYDiUd3boVqxoQo5B_RW0S7-EAWaytqO4BYdQRUzR_fBVa6BlZm2EAErabbsuEnS9bvgRh41VqJD9DEULkI3xGbofoV7ZoA83GVkjzqE-RtXP7EaM_c9sa9JElV8d-34ysYtnJVvxmJW-dHHdTAAC7gKWYQUZ8ScOjfVLi7c7LCJDQZnBGWWAewlcdj29BjDtGTHbfbYUqNrVVmvzqevkxytshz-Hgn6qayfNsfcmGIw-yORfEl_Am6f_JZgc1Nm2jtb_Vmh6F_h3YfBdpV8oRQ1QjV_Y3XqMpZbHk5mYWI4l44h4_VBeS02ug5fU7uggAhWdnvEIHD7MJcHVy9c2r88fMo3TBj-ORrWnSWBTmY3SeFBmZYWt8oFLqCC0_ngQIAu-3x1OHEeESlMKFAYbRwWjMMXRAfkkxr5PN_cwZYiaZ-yoHvp22-zRrqmdzNnmOa4o-iklCX4WBPIMzEDDJxkpNQ6CciuMNXnbHFVE1lVgVOJx9_W59MQ1mERFX43P-ur2tzYV6kKYZ4gobbH-7NyK-ms6FfE7LirFs_ge-R9rn3spCDsVEzVTuFLbhsIOz43TiL2f1IF0ueitT2n_vQC9R8tH6kKXu3rmxe7-IPKgY8yc1_LgwyIoyR2ukRt-MZUGBrzTguLC34P6Ql3ksoFHz37MXoiGHjr9lUSiQvCaJ0LbgWik4gh5TG74bQb7UJW7K5o1cFDqQsU39iGz1YTgZmqvi0MA5QsU2outO6AJj0dVcCrDNTikWZ-54GzGMQwnqswKBHpkzVMfcbjvKzB4ZoXXTPMH46Q3jxv_92lyECdnwzDDeZmJaqz89YI-ketKmvxqzhT1ddFV6JQjNWu-3lI4x0EZO1lGYWnTyzbMa-zt4w_aQ6JqZvyh7nSyHMlWoBfBh_ZPujSdSCaqwhvctbNirBGX1zb8onmxxa_QWzrC6R5fbL9llF5SwDIuMRXe4jcYrRakChPRmmvU29jJKVyPYviC78bcF6axqxoML8cSe_YRUhN1myZPIAEqCXVzLXdlc3QtMjClDA.m3u8" --save-name chunklist &
        # --live-keep-segments 
    
    - name: Run Python script
      run: |
        pip install requests
        pip install pywidevine
        ls
        python send_Telegram.py
      env:
        channel_id: "-1002477355148"
        bot_token: ${{ secrets.bot_token }}
