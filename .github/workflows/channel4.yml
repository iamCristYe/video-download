name: channel4

on:
  # schedule:
  #   - cron: '20,50 * * * *'
  # push:
  #   branches:
  #     - master
  workflow_dispatch:

jobs:
  channel4:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.8' # Specify the Python version you need
    - name: Download FFmpeg
      run: |
        sudo apt update
        sudo apt install ffmpeg 
        ffmpeg -version

    - name: Download N_m3u8DL-RE and Stream
      run: |
        wget -O N_m3u8DL-RE.tar.gz https://github.com/nilaoda/N_m3u8DL-RE/releases/download/v0.3.0-beta/N_m3u8DL-RE_v0.3.0-beta_linux-x64_20241203.tar.gz
        tar -xzf N_m3u8DL-RE.tar.gz
        ./N_m3u8DL-RE --live-real-time-merge "https://apn11.playlist.live-video.net/v1/playlist/CogGa9yeJVq6k915MhrRxrJMCpqUEpMKtpV0GFhomSxd5pCkPYaMRaYg4fabTbhactEV716fG1e8SMFx1XB99LVFRKJ_sr2kRHZrknT0yxml3I0jVQiZ_823ibs1gEXfIr4F697ZmQuk-SCsm9IuwkSPhQHzUJ1EEs8g5-xur4RwqKE7b4L_f1zeLg_ti3Tz73LneZlUaZIVV1OCaxqJMX5aFftorsLw7UIDhOKpq_8vBnJs6y_yfXCC_CwXtNSXF-nJGaIcNoKWvNUZcUUKpeN2652VyYJIvegMWms8KqyAsIKZ_lSP9oem-1W5N45_zJB38gua6jgyrAT06TH9qFSIBoh-DNPJintY9oTBO5SstAWDZMWeK-3c688DnUn6yJsxu-za5bqCltvcmE_Yu2UgVfnXm2o0ukL0kAx7D4WxyOZdqHAcSoi5Ym2mDJaT8n-e1dcAMpM7PraL74Rr2RC7vMwGANiigX-RxqsXdDtKzRBA0fDlNkR6lrMynwyVLqU7d_GeYmjzd9HGAa3waZILP8CAedYQbqujjyklekcj_stGWXHYcaEdKy-vo26_X6JFxZ7fyS9e5Pvx-fnh-Bt7oqsKWNv3sUgey0fGt0BoP7rlmOHK4vpMWbNq36MWzHPYUVFX7cCf6ttUvJ6KgtF-oNr3t-6F1HqMkSkkQZBvFIuJD3ZZMFcasEKscsAjh8qranhXQT6TKjtUFnCJ4spu4bgsBzL6hQU2Nnvgo3my43WkCQ1yEqSnmhnQJ0LQljw95hpDX0824YZZ5S1_dzPPBLb13crtvlNIrc4nMLG-w1IvSlgbxoeFXVxEjOau9Xe6Kw_MqGDQK7JBW_cNGIcPqd2DAbh0YPNhV1UnvXTY17oVa2pLeJp5fubXZyX75iPx_FLcm4ugRpQtb4_CyiQkeCg8rvfNvqIQZvDV-QkCi1LbpAQmy5PazUskN0OStdg4NnsUG8QEAHxQirCWojy_-PMzsJVO90oP4BpV_1N8ukaI8trnFhgWt6rxVyHDblX9Kwqk6tMGcrwaDJU1JSRFc7sIw3Y3DSABKgl1cy13ZXN0LTIwpQw.m3u8" --save-name chunklist &
        # --live-keep-segments 
    
    - name: Run Python script
      run: |
        pip install requests
        pip install pywidevine
        ls
        python send_Telegram.py
      env:
        channel_id: "-1002477355148"
        bot_token: ${{ secrets.bot_token }}
